<!DOCTYPE html>
<html>

	<head>
		<title>Students - Class by Period </title>
		~[wc:commonscripts]
		<link href="/images/css/screen.css" rel="stylesheet" media="screen">
		<link href="/images/css/print.css" rel="stylesheet" media="print">
		~[wc:pscb_init]
	</head>

	<body>
		~[wc:admin_header_frame_css]
		<!-- breadcrumb start --><a href="/admin/home.html" target="_top">Start Page</a> &gt; <a
			href="/admin/reports_pscb/pscb_home.html">PSCB Custom Reports</a> &gt; <a
			href="/admin/reports_pscb/pscb_scheduleCY.html">Scheduling (Current Year)</a> &gt; Students - Class by
		Period
		<!-- breadcrumb end -->~[wc:admin_navigation_frame_css]
		<h1>Students - Class by Period</h1>
		<form name="rptFilters" action="#" method="POST">
			<div class="box-round" style="overflow: hidden;">
				<h2>Report Filters</h2>
				<table border="0" cellspacing="0" cellpadding="4" style="line-height: 25px">
					<tr>
						<th>Student Selection</th>
						<th>Term</th>
						<th>Period</th>
						<th>Course Name</th>
						<th>Teacher</th>
						<th>Department</th>
					</tr>
					<tr>
						<td>
							<select name="ss">
								<option value="cur" ~[if.~(gpv.ss)=cur]selected[/if]>Current Selection (~[x:studsinset])
								</option>
								<option value='' ~[if.~(gpv.ss)=]selected[/if]>All Students</option>
							</select>
						</td>
						<td valign="top" nowrap>
							<select id="term" name="term">
								<option value="" ~[if.~(gpv.term)=]selected[/if]>All Terms</option>
								~[tlist_sql;SELECT terms.id termid, CASE WHEN terms.id = '~(gpv.term;sqlText)' THEN
								'selected' ELSE '' END
								isselected, Upper(Abbreviation) term FROM terms WHERE terms.schoolid = ~(curschoolid)
								AND terms.yearid =
								~(curyearid) ORDER BY Upper(Trim(term))]
								<option value="~(termid)" ~(isselected;t)>~(term)</option>
								[/tlist_sql]
							</select>
						</td>
						<td valign="top" nowrap>
							<select id="exp" name="exp">
								<option value="" ~[if.~(gpv.cn)=]selected[/if]>All Courses</option>
								~[tlist_sql;SELECT DISTINCT
								cc.expression expression,
								CASE
								WHEN upper(crs.course_name) = '~(gpv.cn;sqlText)' THEN 'selected'
								ELSE ''
								END isselected
								from cc
								where cc.schoolid = ~(curschoolid) and cc.termid like '~(curyearid)__'
								order by cc.expression]
								<option value="~(expression;t)" ~(isselected;t)>~(expression;t;externalExpression)
								</option>
								[/tlist_sql]
							</select>
						</td>
						<td valign="top" nowrap>
							<select id="cn" name="cn">
								<option value="" ~[if.~(gpv.cn)=]selected[/if]>All Courses</option>
								~[tlist_sql;SELECT DISTINCT Upper(crs.course_name) course_name, CASE WHEN
								Upper(crs.course_name) =
								'~(gpv.cn;sqlText)' THEN 'selected' ELSE '' END isselected FROM sections sect INNER JOIN
								courses crs ON
								sect.course_number = crs.course_number WHERE sect.schoolid = ~(curschoolid) AND
								sect.termid LIKE
								'~(curyearid)__' ORDER BY Upper(Trim(Course_Name))]
								<option value="~(course_name;t)" ~(isselected;t)>~(course_name;t)</option>
								[/tlist_sql]
							</select>
						</td>
						<td valign="top" nowrap>
							<select id="TchName" name="TchName">
								<option value="" ~[if.~(gpv.TchName)=]selected[/if]>All Teachers</option>
								~[tlist_sql;SELECT DISTINCT t.id, CASE WHEN t.id = '~(gpv.TchName;sqlText)' THEN
								'selected' ELSE '' END isselected, t.lastfirst FROM sections sect INNER JOIN teachers t
								ON t.id = sect.teacher AND t.schoolid = sect.schoolid WHERE sect.schoolid =
								~(curschoolid) AND sect.termid LIKE '~(curyearid)__' ORDER BY Upper(Trim(t.lastfirst))]
								<option value="~(t.id)" ~(isselected;t)>~(t.lastfirst; t)</option>
								[/tlist_sql]
							</select>
						</td>
						<td valign="top" nowrap>
							<select id="dept" name="dept">
								<option value="" ~[if.~(gpv.dept)=]selected[/if]>All Departments</option>
								~[tlist_sql;SELECT DISTINCT Upper(crs.sched_department) dept, CASE WHEN
								Upper(crs.sched_department) =
								'~(gpv.dept;sqlText)' THEN 'selected' ELSE '' END isselected FROM sections sect INNER
								JOIN courses crs ON
								sect.course_number = crs.course_number WHERE sect.schoolid = ~(curschoolid) AND
								sect.termid LIKE
								'~(curyearid)__' ORDER BY Upper(Trim(dept))]
								<option value="~(dept;t)" ~(isselected;t)>~(dept;t)</option>
								[/tlist_sql]
							</select>
						</td>
					</tr>
				</table>
				<div class="button-row" style="float: left;">
					<input type="hidden" name="showData" value="1">
					<span class="red">&nbsp;&nbsp;Select parameters and click submit</span>
					<input type="hidden" name="ac" value="prim">~[submitbutton]
				</div>
			</div>
		</form>
		<!-- end of Options -->

		<!-- Start of Results -->
		~[if#showData.~(gpv.showData)=1]
		<div class="box-round">
			<h2>Class Listing <span><label id="lblRecordCount"></label></span></h2>
			<table border="0" cellspacing="0" cellpadding="0" class="tablesorter grid" id="results" groupRowsByCol="1"
				color1="#ffffff" color2="#d7edfe">
				<thead>
					<tr>
						<th class="left">Student #</th>
						<th class="left">Student</th>
						<th class="left">Grade</th>
						<th class="left">Gender</th>
						<th class="left filter-select">Term</th>
						<th class="left">Period</th>
						<th class="left">Course Number</th>
						<th class="left">Section</th>
						<th class="left">Course</th>
						<th class="left filter-select">Teacher</th>
						<th class="left">Teacher Number</th>
						<th class="left filter-select">Course Dept</th>
						<th class="left filter-select">Room</th>
						<th class="left">School</th>
					</tr>
				</thead>
				<tbody>
					~[tlist_sql;
					SELECT s.dcid
					,s.Student_Number
					,s.LastFirst AS StudName
					,s.grade_Level AS GradeLvl
					,s.Gender
					,Decode(Trm.IsYearRec, 1, 'YR', Trm.Abbreviation) AS Term
					,cc.Expression
					,cc.COURSE_NUMBER AS CrseNum
					,cc.SECTION_NUMBER AS CrsSec
					,c.Course_Name AS CrsTitle
					,t.LastFirst AS TchName
					,t.TeacherNumber AS TchNumber
					,c.Sched_Department AS CrsDept
					,ss.Room
					,sch.abbreviation school
					FROM Students s
					LEFT OUTER JOIN cc ON (s.ID = cc.StudentID AND cc.TermID BETWEEN ~(curyearid)00 AND ~(curyearid)99)
					LEFT OUTER JOIN Sections ss ON (cc.SectionID = ss.ID)
					LEFT OUTER JOIN Teachers t ON (ss.Teacher = t.ID)
					LEFT OUTER JOIN courses c ON (cc.Course_Number = c.Course_Number)
					LEFT OUTER JOIN terms trm ON (ss.TermID = trm.ID AND ss.SchoolID = trm.SchoolID)
					LEFT OUTER JOIN schools sch ON (s.schoolid = sch.school_number)
					~[if#e.~(gpv.ss)=cur] INNER JOIN ~[temp.table.current.selection:students] temp ON (s.dcid =
					temp.dcid) [/if#e]
					WHERE s.Enroll_Status <in (-1,0) AND cc.schoolid=~(curschoolid) ~[if.~(gpv.sec)#] AND
						ss.id=~(gpv.sec;sqlText) [/if] ~[if.~(gpv.exp)#] AND cc.Expression=~(gpv.exp;sqlText)
						[/if]~[if.~(gpv.dept)#] AND Upper(c.sched_department)='~(gpv.dept;sqlText)' [/if]
						~[if.~(gpv.cn)#] AND Upper(c.course_name)='~(gpv.cn;sqlText)' [/if] ~[if.~(gpv.TchName)#] AND
						ss.Teacher=~(gpv.TchName;sqlText) [/if] ~[if.~(gpv.term)#] AND ss.termid=~(gpv.term;sqlText)
						[/if] ORDER BY Upper(Trim(s.LastFirst)), Upper(Trim(CrsTitle)) ;alternatecolor;nonemessage=<tr>
						<td colspan="100%">No records returned.</td>
						</tr>]
						<tr class="Record" data-StudentID="~(dcid;t)">
							<td class="nowrap"><a href="/admin/students/schedulelist.html?frn=001~(dcid;t)"
									target="_blank">~(studnum;t)</a></td>
							<td>~(sutdent;t)</td>
							<td>~(gradelvl;t)</td>
							<td>~(gender;t)</td>
							<td>~(term;t)</td>
							<td class="nowrap">~(expression;t;externalExpression)</td>
							<td>~(CrsNum;t)</td>
							<td>~(CrsSec;t)</td>
							<td class="nowrap">~(CrsTitle;t)</td>
							<td class="nowrap">~(TchName;t)</td>
							<td>~(TchNumber;t)</td>
							<td>~(CrsDept;t)</td>
							<td>~(room;t)</td>
							<td>~(school;t)</td>
						</tr>
						[/tlist_sql]
				</tbody>
			</table>
		</div>
		[/if#showData]
		<br>
		<!-- end of content of bounding box -->
		~[wc:admin_footer_css]
	</body>

</html><!-- non framed -->